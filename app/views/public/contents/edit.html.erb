<!-- app/views/posts/edit.html.erb -->
<%= stylesheet_link_tag 'public/posts', media: 'all' %>
<div class="container-fluid">
  <div class="row d-flex justify-content-center">
    <div class="col-md-2 d-flex flex-column align-items-center">
      <%= render 'public/users/user_card', user: @user %>
    </div>
    <div class="col-md-10">
      <%= form_with model: [@category, @title, @genre, @content], local: true, html: { id: 'post_form', enctype: 'multipart/form-data' } do |f| %>
        <div class="row">
          <div class="col-md-8 mb-4">
            <div>
              <%= link_to  mypage_users_path, class: 'mypage-link', title: 'マイページ' do %>
                <i class="fa-solid fa-user"></i>
              <% end %>＞
              <%= link_to 'もくじ', new_category_path, class: 'return-link-black', title: 'よっつ前に戻る' %>＞
              <%= link_to @category.category_name, category_path(@category), class: 'return-link-brown', title: 'みっつ前に戻る' %>＞
              <%= link_to @title.title_name, category_title_path(@category, @title), class: 'return-link-blue', title: 'ふたつ前に戻る' %>＞
              <%= link_to @genre.genre_name, category_title_genre_path(@category, @title, @genre), class: 'return-link-green', title: 'ひとつ前に戻る' %>＞
            </div>
            <div class="text-center d-flex justify-content-between align-items-center mt-2">
              <%= f.label :body, '※項目名を編集(20文字まで入力できます)', style: "margin-bottom: -2rem" %>
              <div>
                <%= f.submit 'ページを保存', class: 'btn btn-success' %>
                <%= link_to 'ページを削除', category_title_genre_content_path(@category, @title, @genre, @content), method: :delete, data: { confirm: '本当に削除してもよろしいですか？' }, class: 'btn btn-danger mr-1', style: 'margin-right: 0;' %>
              </div>
            </div>
          </div>
        </div>
        <div class="row d-flex mb-3">
          <div class="field col-md-8">
            <%= f.text_field :content_name, class: 'form-control mb-3', autofocus: true %>
            <%= f.label :body, '※編集内容を入力してください', style: "margin-bottom: -2rem" %>
            <%= f.text_area :body, class: 'post-text-area' %>
          </div>
          <div class="col-md-4 mt-4">
            <div class="text-left mb-2">
              <button id="add_image_button" type="button" class="image-add-btn btn-secondary" style="width: 50%">画像を追加する</button>
              ※画像は3枚まで登録できます
            </div>
            <div class="content-image-field">
              <div class="file-field_0 mb-3">
                <!-- 画像を追加するためのフィールド -->
                <input name="content[images][]" type="file" class="content_image" aria-num="0" onchange="fileSelect(this);" multiple>
                <img id="preview_area_0">
              </div>
            </div>
          </div>
        </div>
      <% end %>
    </div>
  </div>
</div>